<script>
  const API_ENDPOINT = 'https://carnet-api-green.vercel.app/api/handler';

  const URL_LOGO_IC = 'https://raw.githubusercontent.com/instructormap/generador-de-carnets-Colbert/main/logo_ic.png';
  const URL_LOGOS_INFERIORES = 'https://raw.githubusercontent.com/instructormap/generador-de-carnets-Colbert/main/logos_inferiores.png';
  const URL_HOLOGRAMA = 'https://raw.githubusercontent.com/instructormap/generador-de-carnets-Colbert/main/holograma_aai.png';
  const URL_REVERSO = 'https://raw.githubusercontent.com/instructormap/generador-de-carnets-Colbert/main/fondo_carnet_vuelta.png';

  const templates = [
    { name: 'Plantilla Oficial Colbert', url: 'https://raw.githubusercontent.com/instructormap/generador-de-carnets-Colbert/main/anverso_carnet_colbert.jpeg' },
    { name: 'Plantilla Original', url: 'https://raw.githubusercontent.com/instructormap/generador-de-carnets-Colbert/main/fondo%20carnet2.png' }
  ];

  document.addEventListener('DOMContentLoaded', () => {
    // Cargar assets fijos
    logoIcPreview.src = URL_LOGO_IC;
    logosInferioresPreview.src = URL_LOGOS_INFERIORES;
    hologramPreview.src = URL_HOLOGRAMA;
    reversoPreview.src = URL_REVERSO;

    // Renderizar galería de plantillas
    templates.forEach((t, i) => {
      const img = document.createElement('img');
      img.src = t.url;
      img.alt = t.name;
      img.className = 'template-option rounded-md object-cover h-24 w-full';
      img.dataset.index = i;
      img.onclick = () => selectTemplate(i);
      templateGallery.appendChild(img);
    });

    // Seleccionar la plantilla oficial (índice 0) por defecto
    selectTemplate(0);
  });

  function selectTemplate(index) {
    templateBg.src = templates[index].url;
    document.querySelectorAll('.template-option').forEach(el => el.classList.remove('selected'));
    document.querySelector(`.template-option[data-index='${index}']`).classList.add('selected');
  }
</script>
